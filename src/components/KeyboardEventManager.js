
export const EventCodes = {
    'Backspace': 8,
    'Tab': 9,
    'Enter': 13,
    'ShiftLeft': 16,
    'ShiftRight': 16,
    'ControlLeft': 17,
    'ControlRight': 17,
    'AltLeft': 18,
    'AltRight': 18,
    'Pause': 19,
    'Break': 19,
    'CapsLock': 20,
    'Escape': 27,
    'Space': 32,
    'PageUp': 33,
    'PageDown': 34,
    'End': 35,
    'Home': 36,
    'ArrowLeft': 37,
    'ArrowUp': 38,
    'ArrowRight': 39,
    'ArrowDown': 40,
    'PrintScreen': 44,
    'Insert': 45,
    'Delete': 46,
    'Digit0': 48,
    'Digit1': 49,
    'Digit2': 50,
    'Digit3': 51,
    'Digit4': 52,
    'Digit5': 53,
    'Digit6': 54,
    'Digit7': 55,
    'Digit8': 56,
    'Digit9': 57,
    'KeyA': 65,
    'KeyB': 66,
    'KeyC': 67,
    'KeyD': 68,
    'KeyE': 69,
    'KeyF': 70,
    'KeyG': 71,
    'KeyH': 72,
    'KeyI': 73,
    'KeyJ': 74,
    'KeyK': 75,
    'KeyL': 76,
    'KeyM': 77,
    'KeyN': 78,
    'KeyO': 79,
    'KeyP': 80,
    'KeyQ': 81,
    'KeyR': 82,
    'KeyS': 83,
    'KeyT': 84,
    'KeyU': 85,
    'KeyV': 86,
    'KeyW': 87,
    'KeyX': 88,
    'KeyY': 89,
    'KeyZ': 90,
    'MetaLeft': 91,
    'MetaRight': 92,
    'ContextMenu': 93,
    'Numpad0': 96,
    'Numpad1': 97,
    'Numpad2': 98,
    'Numpad3': 99,
    'Numpad4': 100,
    'Numpad5': 101,
    'Numpad6': 102,
    'Numpad7': 103,
    'Numpad8': 104,
    'Numpad9': 105,
    'NumpadMultiply': 106,
    'NumpadAdd': 107,
    'NumpadSubtract': 109,
    'NumpadDecimal': 110,
    'NumpadDivide': 111,
    'F1': 112,
    'F2': 113,
    'F3': 114,
    'F4': 115,
    'F5': 116,
    'F6': 117,
    'F7': 118,
    'F8': 119,
    'F9': 120,
    'F10': 121,
    'F11': 122,
    'F12': 123,
    'NumLock': 144,
    'ScrollLock': 145,
    'Semicolon': 186,
    'Equal': 187,
    'Comma': 188,
    'Minus': 189,
    'Period': 190,
    'Slash': 191,
    'Backquote': 192,
    'BracketLeft': 219,
    'Backslash': 220,
    'BracketRight': 221,
    'Quote': 222,
};

export const EventCodesNames = {
    'Backspace': 'Backspace',
    'Tab': 'Tab',
    'Enter': 'Enter',
    'ShiftLeft': 'ShiftLeft',
    'ShiftRight': 'ShiftRight',
    'ControlLeft': 'ControlLeft',
    'ControlRight': 'ControlRight',
    'AltLeft': 'AltLeft',
    'AltRight': 'AltRight',
    'Pause': 'Pause',
    'Break': 'Break',
    'CapsLock': 'CapsLock',
    'Escape': 'Escape',
    'Space': 'Space',
    'PageUp': 'PageUp',
    'PageDown': 'PageDown',
    'End': 'End',
    'Home': 'Home',
    'ArrowLeft': 'ArrowLeft',
    'ArrowUp': 'ArrowUp',
    'ArrowRight': 'ArrowRight',
    'ArrowDown': 'ArrowDown',
    'PrintScreen': 'PrintScreen',
    'Insert': 'Insert',
    'Delete': 'Delete',
    'Digit0': 'Digit0',
    'Digit1': 'Digit1',
    'Digit2': 'Digit2',
    'Digit3': 'Digit3',
    'Digit4': 'Digit4',
    'Digit5': 'Digit5',
    'Digit6': 'Digit6',
    'Digit7': 'Digit7',
    'Digit8': 'Digit8',
    'Digit9': 'Digit9',
    'KeyA': 'KeyA',
    'KeyB': 'KeyB',
    'KeyC': 'KeyC',
    'KeyD': 'KeyD',
    'KeyE': 'KeyE',
    'KeyF': 'KeyF',
    'KeyG': 'KeyG',
    'KeyH': 'KeyH',
    'KeyI': 'KeyI',
    'KeyJ': 'KeyJ',
    'KeyK': 'KeyK',
    'KeyL': 'KeyL',
    'KeyM': 'KeyM',
    'KeyN': 'KeyN',
    'KeyO': 'KeyO',
    'KeyP': 'KeyP',
    'KeyQ': 'KeyQ',
    'KeyR': 'KeyR',
    'KeyS': 'KeyS',
    'KeyT': 'KeyT',
    'KeyU': 'KeyU',
    'KeyV': 'KeyV',
    'KeyW': 'KeyW',
    'KeyX': 'KeyX',
    'KeyY': 'KeyY',
    'KeyZ': 'KeyZ',
    'MetaLeft': 'MetaLeft',
    'MetaRight': 'MetaRight',
    'ContextMenu': 'ContextMenu',
    'Numpad0': 'Numpad0',
    'Numpad1': 'Numpad1',
    'Numpad2': 'Numpad2',
    'Numpad3': 'Numpad3',
    'Numpad4': 'Numpad4',
    'Numpad5': 'Numpad5',
    'Numpad6': 'Numpad6',
    'Numpad7': 'Numpad7',
    'Numpad8': 'Numpad8',
    'Numpad9': 'Numpad9',
    'NumpadMultiply': 'NumpadMultiply',
    'NumpadAdd': 'NumpadAdd',
    'NumpadSubtract': 'NumpadSubtract',
    'NumpadDecimal': 'NumpadDecimal',
    'NumpadDivide': 'NumpadDivide',
    'F1': 'F1',
    'F2': 'F2',
    'F3': 'F3',
    'F4': 'F4',
    'F5': 'F5',
    'F6': 'F6',
    'F7': 'F7',
    'F8': 'F8',
    'F9': 'F9',
    'F10': 'F10',
    'F11': 'F11',
    'F12': 'F12',
    'NumLock': 'NumLock',
    'ScrollLock': 'ScrollLock',
    'Semicolon': 'Semicolon',
    'Equal': 'Equal',
    'Comma': 'Comma',
    'Minus': 'Minus',
    'Period': 'Period',
    'Slash': 'Slash',
    'Backquote': 'Backquote',
    'BracketLeft': 'BracketLeft',
    'Backslash': 'Backslash',
    'BracketRight': 'BracketRight',
    'Quote': 'Quote',
};

export const EventKeys = {
    'backspace': 8,
    'tab': 9,
    'enter': 13,
    'shift(left)': 16,
    'shift(right)': 16,
    'ctrl(left)': 17,
    'ctrl(right)': 17,
    'alt(left)': 18,
    'alt(right)': 18,
    'pause/break': 19,
    'caps lock': 20,
    'escape': 27,
    'space': 32,
    'page up': 33,
    'page down': 34,
    'end': 35,
    'home': 36,
    'left arrow': 37,
    'up arrow': 38,
    'right arrow': 39,
    'down arrow': 40,
    'print screen': 44,
    'insert': 45,
    'delete': 46,
    '0': 48,
    '1': 49,
    '2': 50,
    '3': 51,
    '4': 52,
    '5': 53,
    '6': 54,
    '7': 55,
    '8': 56,
    '9': 57,
    'a': 65,
    'b': 66,
    'c': 67,
    'd': 68,
    'e': 69,
    'f': 70,
    'g': 71,
    'h': 72,
    'i': 73,
    'j': 74,
    'k': 75,
    'l': 76,
    'm': 77,
    'n': 78,
    'o': 79,
    'p': 80,
    'q': 81,
    'r': 82,
    's': 83,
    't': 84,
    'u': 85,
    'v': 86,
    'w': 87,
    'x': 88,
    'y': 89,
    'z': 90,
    'numpad 0': 96,
    'numpad 1': 97,
    'numpad 2': 98,
    'numpad 3': 99,
    'numpad 4': 100,
    'numpad 5': 101,
    'numpad 6': 102,
    'numpad 7': 103,
    'numpad 8': 104,
    'numpad 9': 105,
    'multiply': 106,
    'add': 107,
    'subtract': 109,
    'divide': 111,
    'decimal point': 110,
    'f1': 112,
    'f2': 113,
    'f3': 114,
    'f4': 115,
    'f5': 116,
    'f6': 117,
    'f7': 118,
    'f8': 119,
    'f9': 120,
    'f10': 121,
    'f11': 122,
    'f12': 123,
    'num lock': 144,
    'scroll lock': 145,
};

export const EventKeysNames = {

    'backspace': 'backspace',
    'tab': 'tab',
    'enter': 'enter',
    'shift(left)': 'shift(left)',
    'shift(right)': 'shift(right)',
    'ctrl(left)': 'ctrl(left)',
    'ctrl(right)': 'ctrl(right)',
    'alt(left)': 'alt(left)',
    'alt(right)': 'alt(right)',
    'pause/break': 'pause/break',
    'caps lock': 'caps lock',
    'escape': 'escape',
    'space': 'space',
    'page up': 'page up',
    'page down': 'page down',
    'end': 'end',
    'home': 'home',
    'left arrow': 'left arrow',
    'up arrow': 'up arrow',
    'right arrow': 'right arrow',
    'down arrow': 'down arrow',
    'print screen': 'print screen',
    'insert': 'insert',
    'delete': 'delete',
    '0': '0',
    '1': '1',
    '2': '2',
    '3': '3',
    '4': '4',
    '5': '5',
    '6': '6',
    '7': '7',
    '8': '8',
    '9': '9',
    'a': 'a',
    'b': 'b',
    'c': 'c',
    'd': 'd',
    'e': 'e',
    'f': 'f',
    'g': 'g',
    'h': 'h',
    'i': 'i',
    'j': 'j',
    'k': 'k',
    'l': 'l',
    'm': 'm',
    'n': 'n',
    'o': 'o',
    'p': 'p',
    'q': 'q',
    'r': 'r',
    's': 's',
    't': 't',
    'u': 'u',
    'v': 'v',
    'w': 'w',
    'x': 'x',
    'y': 'y',
    'z': 'z',
    'numpad 0': 'numpad 0',
    'numpad 1': 'numpad 1',
    'numpad 2': 'numpad 2',
    'numpad 3': 'numpad 3',
    'numpad 4': 'numpad 4',
    'numpad 5': 'numpad 5',
    'numpad 6': 'numpad 6',
    'numpad 7': 'numpad 7',
    'numpad 8': 'numpad 8',
    'numpad 9': 'numpad 9',
    'multiply': 'multiply',
    'add': 'add',
    'subtract': 'subtract',
    'divide': 'divide',
    'decimal point': 'decimal point',
    'f1': 'f1',
    'f2': 'f2',
    'f3': 'f3',
    'f4': 'f4',
    'f5': 'f5',
    'f6': 'f6',
    'f7': 'f7',
    'f8': 'f8',
    'f9': 'f9',
    'f10': 'f10',
    'f11': 'f11',
    'f12': 'f12',
    'num lock': 'num lock',
    'scroll lock': 'scroll lock',
}

/*
const keyboard = KeyboardEventManager();
keyboard.each(EVENT_NAME, function (event) {})
keyboard.withConditionKey
keyboard.press()
keyboard.up()
keyboard.down()
*/
/**
 *
 * @returns {{withConditionKey(*=, *=, *=): void, up(*=, *=): void, press(*=, *=): void, down(*=, *=): void, each(*=, *=): void}}
 * @constructor
 */
const KeyboardEventManager = function () {
    const storage = {};
    const baseCallbacksList = {};
    const addStorage = function (event, key, callback) {
        if (!storage[event]) storage[event] = {};
        if (!storage[event][key]) storage[event][key] = [];
        storage[event][key].push(callback);

        if (typeof baseCallbacksList[event] !== 'function') {
            baseCallbacksList[event] = baseCallback;
        }
    };

    const baseCallback = function (event) {
        Object.keys(storage).map((type) => {
            Object.keys(storage[type]).map((keyCode) => {
                if (Array.isArray(storage[type][keyCode])) {
                    storage[type][keyCode].map((callback) => {

                        if (event.type === type && parseInt(keyCode) === event.keyCode) {
                            callback.call(event, event);
                        }
                    });
                }
            });
        });
    };

    const eachCallbacksList = {};
    const eachCallback = function (event, callback) {
        eachCallbacksList[event] = callback;
    };

    function setupListeners() {
        const removeEventListeners = () => {
            Object.keys(baseCallbacksList).map(function (event) {
                document.removeEventListener(event, baseCallbacksList[event]);
            })
            Object.keys(eachCallbacksList).map(function (event) {
                document.removeEventListener(event, eachCallbacksList[event]);
            })
        };
        const addEventListeners = () => {
            Object.keys(baseCallbacksList).map(function (event) {
                document.addEventListener(event, baseCallbacksList[event]);
            })
            Object.keys(eachCallbacksList).map(function (event) {
                document.addEventListener(event, eachCallbacksList[event]);
            })
        };
        removeEventListeners();
        addEventListeners();
    }

    const codeToKeyCode = (key) => {
        if (typeof key === 'string' && EventCodes[key]
            && typeof EventCodes[key] == "number"
        ) {
            return EventCodes[key];
        }

        if (typeof key === 'string' && EventKeys[key]
            && typeof EventKeys[key] == "number"
        ) {
            return EventKeys[key];
        }

        throw new Error('Key string not fond');
    };

    const root = {
        each(event, callback) {
            eachCallback(event, callback);
            setupListeners();
        },
        withConditionKey(event, key, callback) {
            if (typeof key === 'string') {
                key = codeToKeyCode(key);
            }
            addStorage(event, key, callback);
            setupListeners();
        },
        press(key, callback) {
            root.withConditionKey('keypress', key, callback);
        },
        up(key, callback) {
            root.withConditionKey('keyup', key, callback);
        },
        down(key, callback) {
            root.withConditionKey('keydown', key, callback);
        },
    };

    return root;
};

KeyboardEventManager.EventCodes = EventCodes;
KeyboardEventManager.EventKeys = EventKeys;

KeyboardEventManager.getEventKeyByEventCode = function (eventCode) {
    let currentEventKey = false;
    const which = EventCodes[eventCode];
    Object.keys(EventKeys).filter((key, index) => {
        if (EventKeys[key] === which) {
            return currentEventKey = key;
        }
    });

    return currentEventKey;
};

KeyboardEventManager.getEventCodeByEventKey = function (eventKey) {
    let currentEventCode = false;
    const which = EventKeys[eventKey];
    Object.keys(EventCodes).filter((key, index) => {
        if (EventCodes[key] === which) {
            return currentEventCode = key;
        }
    });

    return currentEventCode;
};

KeyboardEventManager.getWhichByEventCode = function (eventCode) {
    return EventCodes[eventCode];
}

KeyboardEventManager.getEventCodeByWhich = function (which) {
    let currentEventCode = false;
    Object.keys(EventCodes).filter((key, index) => {
        if (EventCodes[key] === which) {
            return currentEventCode = key;
        }
    });

    return currentEventCode;
};


export default KeyboardEventManager;
